(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95db8d76"],{"057f":function(t,e,n){var r=n("fc6a"),c=n("241c").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(t){try{return c(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?i(t):c(r(t))}},"159d":function(t,e,n){"use strict";n.r(e);var r=n("7a23"),c={class:"table mt-4"},a=Object(r["h"])("thead",null,[Object(r["h"])("tr",null,[Object(r["h"])("th",null,"購買時間"),Object(r["h"])("th",null,"Email"),Object(r["h"])("th",null,"購買款項"),Object(r["h"])("th",null,"應付金額"),Object(r["h"])("th",null,"是否付款"),Object(r["h"])("th",null,"編輯")])],-1),o={class:"list-unstyled"},i={class:"text-right"},l={class:"form-check form-switch"},s={key:0},d={key:1},b={class:"btn-group"};function u(t,e,n,u,O,h){var f=Object(r["A"])("Loading"),j=Object(r["A"])("OrderModal"),p=Object(r["A"])("DelModal"),m=Object(r["A"])("Pagination");return Object(r["t"])(),Object(r["e"])(r["a"],null,[Object(r["h"])(f,{active:O.isLoading},null,8,["active"]),Object(r["h"])("table",c,[a,Object(r["h"])("tbody",null,[(Object(r["t"])(!0),Object(r["e"])(r["a"],null,Object(r["y"])(O.orders,(function(e,n){return Object(r["t"])(),Object(r["e"])(r["a"],{key:n},[O.orders.length?(Object(r["t"])(),Object(r["e"])("tr",{key:0,class:{"text-secondary":!e.is_paid}},[Object(r["h"])("td",null,Object(r["D"])(t.$filters.date(e.create_at)),1),Object(r["h"])("td",null,[e.user?(Object(r["t"])(),Object(r["e"])("span",{key:0,textContent:Object(r["D"])(e.user.email)},null,8,["textContent"])):Object(r["f"])("",!0)]),Object(r["h"])("td",null,[Object(r["h"])("ul",o,[(Object(r["t"])(!0),Object(r["e"])(r["a"],null,Object(r["y"])(e.products,(function(t,e){return Object(r["t"])(),Object(r["e"])("li",{key:e},Object(r["D"])(t.product.title)+" 數量："+Object(r["D"])(t.qty)+" "+Object(r["D"])(t.product.unit),1)})),128))])]),Object(r["h"])("td",i,Object(r["D"])(e.total),1),Object(r["h"])("td",null,[Object(r["h"])("div",l,[Object(r["M"])(Object(r["h"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(e.id),"onUpdate:modelValue":function(t){return e.is_paid=t},onChange:function(t){return h.updatePaid(e)}},null,40,["id","onUpdate:modelValue","onChange"]),[[r["G"],e.is_paid]]),Object(r["h"])("label",{class:"form-check-label",for:"paidSwitch".concat(e.id)},[e.is_paid?(Object(r["t"])(),Object(r["e"])("span",s,"已付款")):(Object(r["t"])(),Object(r["e"])("span",d,"未付款"))],8,["for"])])]),Object(r["h"])("td",null,[Object(r["h"])("div",b,[Object(r["h"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return h.openModal(!1,e)}},"檢視",8,["onClick"]),Object(r["h"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return h.openDelOrderModal(e)}},"刪除",8,["onClick"])])])],2)):Object(r["f"])("",!0)],64)})),128))])]),Object(r["h"])(j,{order:O.tempOrder,ref:"orderModal",onUpdatePaid:h.updatePaid},null,8,["order","onUpdatePaid"]),Object(r["h"])(p,{item:O.tempOrder,ref:"delModal",onDelItem:h.delOrder},null,8,["item","onDelItem"]),Object(r["h"])(m,{pages:O.pagination,onEmitPages:h.getOrders},null,8,["pages","onEmitPages"])],64)}var O=n("5530"),h=(n("99af"),n("6ff1")),f=(n("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),j={class:"modal-dialog modal-xl",role:"document"},p={class:"modal-content border-0"},m=Object(r["h"])("div",{class:"modal-header bg-dark text-white"},[Object(r["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(r["h"])("span",null,"訂單細節")]),Object(r["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),g={class:"modal-body"},y={class:"row"},v={class:"col-md-4"},w=Object(r["h"])("h3",null,"用戶資料",-1),P={class:"table"},k={key:0},D=Object(r["h"])("th",{style:{width:"100px"}},"姓名",-1),x=Object(r["h"])("th",null,"Email",-1),M=Object(r["h"])("th",null,"電話",-1),S=Object(r["h"])("th",null,"地址",-1),C={class:"col-md-8"},$=Object(r["h"])("h3",null,"訂單細節",-1),_={class:"table"},L=Object(r["h"])("th",{style:{width:"100px"}},"訂單編號",-1),E=Object(r["h"])("th",null,"下單時間",-1),N=Object(r["h"])("th",null,"付款時間",-1),A={key:0},J={key:1},U=Object(r["h"])("th",null,"付款狀態",-1),F={key:0,class:"text-success"},I={key:1,class:"text-muted"},q=Object(r["h"])("th",null,"總金額",-1),T=Object(r["h"])("h3",null,"選購商品",-1),V={class:"table"},G=Object(r["h"])("thead",null,[Object(r["h"])("tr")],-1),Q={class:"text-end"},W={class:"modal-footer"},z=Object(r["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function B(t,e,n,c,a,o){return Object(r["t"])(),Object(r["e"])("div",f,[Object(r["h"])("div",j,[Object(r["h"])("div",p,[m,Object(r["h"])("div",g,[Object(r["h"])("div",y,[Object(r["h"])("div",v,[w,Object(r["h"])("table",P,[a.tempOrder.user?(Object(r["t"])(),Object(r["e"])("tbody",k,[Object(r["h"])("tr",null,[D,Object(r["h"])("td",null,Object(r["D"])(a.tempOrder.user.name),1)]),Object(r["h"])("tr",null,[x,Object(r["h"])("td",null,Object(r["D"])(a.tempOrder.user.email),1)]),Object(r["h"])("tr",null,[M,Object(r["h"])("td",null,Object(r["D"])(a.tempOrder.user.tel),1)]),Object(r["h"])("tr",null,[S,Object(r["h"])("td",null,Object(r["D"])(a.tempOrder.user.address),1)])])):Object(r["f"])("",!0)])]),Object(r["h"])("div",C,[$,Object(r["h"])("table",_,[Object(r["h"])("tbody",null,[Object(r["h"])("tr",null,[L,Object(r["h"])("td",null,Object(r["D"])(a.tempOrder.id),1)]),Object(r["h"])("tr",null,[E,Object(r["h"])("td",null,Object(r["D"])(t.$filters.date(a.tempOrder.create_at)),1)]),Object(r["h"])("tr",null,[N,Object(r["h"])("td",null,[a.tempOrder.paid_date?(Object(r["t"])(),Object(r["e"])("span",A,Object(r["D"])(t.$filters.date(a.tempOrder.paid_date)),1)):(Object(r["t"])(),Object(r["e"])("span",J,"時間不正確"))])]),Object(r["h"])("tr",null,[U,Object(r["h"])("td",null,[a.tempOrder.is_paid?(Object(r["t"])(),Object(r["e"])("strong",F,"已付款")):(Object(r["t"])(),Object(r["e"])("span",I,"尚未付款"))])]),Object(r["h"])("tr",null,[q,Object(r["h"])("td",null,Object(r["D"])(t.$filters.currency(a.tempOrder.total)),1)])])]),T,Object(r["h"])("table",V,[G,Object(r["h"])("tbody",null,[(Object(r["t"])(!0),Object(r["e"])(r["a"],null,Object(r["y"])(a.tempOrder.products,(function(e){return Object(r["t"])(),Object(r["e"])("tr",{key:e.id},[Object(r["h"])("th",null,Object(r["D"])(e.product.title),1),Object(r["h"])("td",null,Object(r["D"])(e.qty)+" / "+Object(r["D"])(e.product.unit),1),Object(r["h"])("td",Q,Object(r["D"])(t.$filters.currency(e.final_total)),1)])})),128))])])])])]),Object(r["h"])("div",W,[z,Object(r["h"])("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=function(e){return t.$emit("update-order",a.tempOrder)})},"確認")])])])],512)}var H=n("e0ae"),K={name:"orderModal",props:{order:{type:Object,default:function(){return{}}}},data:function(){return{status:{},modal:"",tempOrder:{},isPaid:!1}},emits:["update-product"],mixins:[H["a"]],inject:["emitter"],watch:{order:function(){this.tempOrder=this.order,this.isPaid=this.tempOrder.is_paid}}};K.render=B;var R=K,X=n("1799"),Y={data:function(){return{orders:{},isNew:!1,pagination:{},isLoading:!1,tempOrder:{},currentPage:1}},components:{Pagination:X["a"],DelModal:h["a"],OrderModal:R},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e;var n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cchao","/admin/orders?page=").concat(e);this.isLoading=!0,this.$http.get(n,this.tempProduct).then((function(e){t.orders=e.data.orders,t.pagination=e.data.pagination,t.isLoading=!1,console.log(e)}))},openModal:function(t,e){this.tempOrder=Object(O["a"])({},e),this.isNew=!1;var n=this.$refs.orderModal;n.showModal()},openDelOrderModal:function(t){this.tempOrder=Object(O["a"])({},t);var e=this.$refs.delModal;e.showModal()},updatePaid:function(t){var e=this;this.isLoading=!0;var n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cchao","/admin/order/").concat(t.id),r={is_paid:t.is_paid};this.$http.put(n,{data:r}).then((function(t){e.isLoading=!1,e.getOrders(e.currentPage),e.$httpMessageState(t,"更新付款狀態")}))},delOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cchao","/admin/order/").concat(this.tempOrder.id);this.isLoading=!0,this.$http.delete(e).then((function(e){console.log(e);var n=t.$refs.delModal;n.hideModal(),t.getOrders(t.currentPage)}))}},created:function(){this.getOrders(),console.log("https://vue3-course-api.hexschool.io/")}};Y.render=u;e["default"]=Y},1799:function(t,e,n){"use strict";var r=n("7a23"),c={"aria-label":"Page navigation example"},a={class:"pagination justify-content-center"},o=Object(r["h"])("li",{class:"page-item"},[Object(r["h"])("a",{class:"page-link",href:"#","aria-label":"Previous"},[Object(r["h"])("span",{"aria-hidden":"true"},"«")])],-1),i=Object(r["h"])("li",{class:"page-item"},[Object(r["h"])("a",{class:"page-link",href:"#","aria-label":"Next"},[Object(r["h"])("span",{"aria-hidden":"true"},"»")])],-1);function l(t,e,n,l,s,d){return Object(r["t"])(),Object(r["e"])("nav",c,[Object(r["h"])("ul",a,[o,(Object(r["t"])(!0),Object(r["e"])(r["a"],null,Object(r["y"])(n.pages.total_pages,(function(t){return Object(r["t"])(),Object(r["e"])("li",{class:["page-item",{active:t===n.pages.current_page}],key:t},[Object(r["h"])("a",{class:"page-link",href:"#",onClick:Object(r["N"])((function(e){return d.updatePage(t)}),["prevent"])},Object(r["D"])(t),9,["onClick"])],2)})),128)),i])])}var s={props:["pages"],methods:{updatePage:function(t){this.$emit("emit-pages",t)}}};s.render=l;e["a"]=s},"4de4":function(t,e,n){"use strict";var r=n("23e7"),c=n("b727").filter,a=n("1dde"),o=a("filter");r({target:"Array",proto:!0,forced:!o},{filter:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"6ff1":function(t,e,n){"use strict";var r=n("7a23"),c={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},a={class:"modal-dialog",role:"document"},o={class:"modal-content border-0"},i={class:"modal-header bg-danger text-white"},l={class:"modal-title"},s=Object(r["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),d={class:"modal-body"},b=Object(r["g"])(" 是否刪除 "),u={class:"text-danger"},O=Object(r["g"])(" (刪除後將無法恢復)。 "),h={class:"modal-footer"},f=Object(r["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function j(t,e,n,j,p,m){return Object(r["t"])(),Object(r["e"])("div",c,[Object(r["h"])("div",a,[Object(r["h"])("div",o,[Object(r["h"])("div",i,[Object(r["h"])("h5",l,[Object(r["h"])("span",null,"刪除 "+Object(r["D"])(n.item.title),1)]),s]),Object(r["h"])("div",d,[b,Object(r["h"])("strong",u,Object(r["D"])(n.item.title),1),O]),Object(r["h"])("div",h,[f,Object(r["h"])("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=function(e){return t.$emit("del-item")})},"確認刪除 ")])])])],512)}var p=n("e0ae"),m={props:{item:{}},data:function(){return{modal:""}},mixins:[p["a"]]};m.render=j;e["a"]=m},"746f":function(t,e,n){var r=n("428f"),c=n("5135"),a=n("e538"),o=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});c(e,t)||o(e,t,{value:a.f(t)})}},a4d3:function(t,e,n){"use strict";var r=n("23e7"),c=n("da84"),a=n("d066"),o=n("c430"),i=n("83ab"),l=n("4930"),s=n("fdbf"),d=n("d039"),b=n("5135"),u=n("e8b5"),O=n("861d"),h=n("825a"),f=n("7b0b"),j=n("fc6a"),p=n("c04e"),m=n("5c6c"),g=n("7c73"),y=n("df75"),v=n("241c"),w=n("057f"),P=n("7418"),k=n("06cf"),D=n("9bf2"),x=n("d1e7"),M=n("9112"),S=n("6eeb"),C=n("5692"),$=n("f772"),_=n("d012"),L=n("90e3"),E=n("b622"),N=n("e538"),A=n("746f"),J=n("d44e"),U=n("69f3"),F=n("b727").forEach,I=$("hidden"),q="Symbol",T="prototype",V=E("toPrimitive"),G=U.set,Q=U.getterFor(q),W=Object[T],z=c.Symbol,B=a("JSON","stringify"),H=k.f,K=D.f,R=w.f,X=x.f,Y=C("symbols"),Z=C("op-symbols"),tt=C("string-to-symbol-registry"),et=C("symbol-to-string-registry"),nt=C("wks"),rt=c.QObject,ct=!rt||!rt[T]||!rt[T].findChild,at=i&&d((function(){return 7!=g(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=H(W,e);r&&delete W[e],K(t,e,n),r&&t!==W&&K(W,e,r)}:K,ot=function(t,e){var n=Y[t]=g(z[T]);return G(n,{type:q,tag:t,description:e}),i||(n.description=e),n},it=s?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof z},lt=function(t,e,n){t===W&&lt(Z,e,n),h(t);var r=p(e,!0);return h(n),b(Y,r)?(n.enumerable?(b(t,I)&&t[I][r]&&(t[I][r]=!1),n=g(n,{enumerable:m(0,!1)})):(b(t,I)||K(t,I,m(1,{})),t[I][r]=!0),at(t,r,n)):K(t,r,n)},st=function(t,e){h(t);var n=j(e),r=y(n).concat(ht(n));return F(r,(function(e){i&&!bt.call(n,e)||lt(t,e,n[e])})),t},dt=function(t,e){return void 0===e?g(t):st(g(t),e)},bt=function(t){var e=p(t,!0),n=X.call(this,e);return!(this===W&&b(Y,e)&&!b(Z,e))&&(!(n||!b(this,e)||!b(Y,e)||b(this,I)&&this[I][e])||n)},ut=function(t,e){var n=j(t),r=p(e,!0);if(n!==W||!b(Y,r)||b(Z,r)){var c=H(n,r);return!c||!b(Y,r)||b(n,I)&&n[I][r]||(c.enumerable=!0),c}},Ot=function(t){var e=R(j(t)),n=[];return F(e,(function(t){b(Y,t)||b(_,t)||n.push(t)})),n},ht=function(t){var e=t===W,n=R(e?Z:j(t)),r=[];return F(n,(function(t){!b(Y,t)||e&&!b(W,t)||r.push(Y[t])})),r};if(l||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=L(t),n=function(t){this===W&&n.call(Z,t),b(this,I)&&b(this[I],e)&&(this[I][e]=!1),at(this,e,m(1,t))};return i&&ct&&at(W,e,{configurable:!0,set:n}),ot(e,t)},S(z[T],"toString",(function(){return Q(this).tag})),S(z,"withoutSetter",(function(t){return ot(L(t),t)})),x.f=bt,D.f=lt,k.f=ut,v.f=w.f=Ot,P.f=ht,N.f=function(t){return ot(E(t),t)},i&&(K(z[T],"description",{configurable:!0,get:function(){return Q(this).description}}),o||S(W,"propertyIsEnumerable",bt,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:z}),F(y(nt),(function(t){A(t)})),r({target:q,stat:!0,forced:!l},{for:function(t){var e=String(t);if(b(tt,e))return tt[e];var n=z(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!it(t))throw TypeError(t+" is not a symbol");if(b(et,t))return et[t]},useSetter:function(){ct=!0},useSimple:function(){ct=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!i},{create:dt,defineProperty:lt,defineProperties:st,getOwnPropertyDescriptor:ut}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:Ot,getOwnPropertySymbols:ht}),r({target:"Object",stat:!0,forced:d((function(){P.f(1)}))},{getOwnPropertySymbols:function(t){return P.f(f(t))}}),B){var ft=!l||d((function(){var t=z();return"[null]"!=B([t])||"{}"!=B({a:t})||"{}"!=B(Object(t))}));r({target:"JSON",stat:!0,forced:ft},{stringify:function(t,e,n){var r,c=[t],a=1;while(arguments.length>a)c.push(arguments[a++]);if(r=e,(O(e)||void 0!==t)&&!it(t))return u(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!it(e))return e}),c[1]=e,B.apply(null,c)}})}z[T][V]||M(z[T],V,z[T].valueOf),J(z,q),_[I]=!0},b0c0:function(t,e,n){var r=n("83ab"),c=n("9bf2").f,a=Function.prototype,o=a.toString,i=/^\s*function ([^ (]*)/,l="name";r&&!(l in a)&&c(a,l,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(t){return""}}})},dbb4:function(t,e,n){var r=n("23e7"),c=n("83ab"),a=n("56ef"),o=n("fc6a"),i=n("06cf"),l=n("8418");r({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(t){var e,n,r=o(t),c=i.f,s=a(r),d={},b=0;while(s.length>b)n=c(r,e=s[b++]),void 0!==n&&l(d,e,n);return d}})},e439:function(t,e,n){var r=n("23e7"),c=n("d039"),a=n("fc6a"),o=n("06cf").f,i=n("83ab"),l=c((function(){o(1)})),s=!i||l;r({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(t,e){return o(a(t),e)}})},e538:function(t,e,n){var r=n("b622");e.f=r}}]);
//# sourceMappingURL=chunk-95db8d76.3ff6c913.js.map