{"version":3,"sources":["webpack:///./src/views/UserCheckout.vue","webpack:///./src/components/LinePayModal.vue","webpack:///./src/components/LinePayModal.vue?a8fc","webpack:///./src/views/UserCheckout.vue?8e96","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","colspan","width","active","isLoading","payOrder","order","products","item","key","id","product","title","qty","unit","final_total","total","user","email","name","tel","address","is_paid","ref","getOrder","tabindex","role","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","src","$emit","tempOrder","props","Object","default","data","status","modal","isPaid","methods","emits","mixins","modalMixin","inject","watch","this","render","orderId","components","LinePayModal","url","$http","get","then","res","success","console","log","$router","push","post","openModal","linepayComponent","$refs","showModal","created","$route","params","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match","error"],"mappings":"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","file":"js/chunk-f77e497a.ad72ab7a.js","sourcesContent":["<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"my-5 row justify-content-center\">\n    <form class=\"col-md-6\" @submit.prevent=\"payOrder\">\n      <table class=\"table align-middle\">\n        <thead>\n        <th>品名</th>\n        <th>數量</th>\n        <th>單價</th>\n        </thead>\n        <tbody>\n        <tr v-for=\"item in order.products\" :key=\"item.id\">\n          <td>{{ item.product.title }}</td>\n          <td>{{ item.qty }}/{{ item.product.unit }}</td>\n          <td class=\"text-end\">{{ item.final_total }}</td>\n        </tr>\n        </tbody>\n        <tfoot>\n        <tr>\n          <td colspan=\"2\" class=\"text-end\">總計</td>\n          <td class=\"text-end\">{{ order.total }}</td>\n        </tr>\n        </tfoot>\n      </table>\n\n      <table class=\"table\">\n        <tbody>\n        <tr>\n          <th width=\"100\">Email</th>\n          <td>{{ order.user.email }}</td>\n        </tr>\n        <tr>\n          <th>姓名</th>\n          <td>{{ order.user.name }}</td>\n        </tr>\n        <tr>\n          <th>收件人電話</th>\n          <td>{{ order.user.tel }}</td>\n        </tr>\n        <tr>\n          <th>收件人地址</th>\n          <td>{{ order.user.address }}</td>\n        </tr>\n        <tr>\n          <th>付款狀態</th>\n          <td>\n            <span v-if=\"!order.is_paid\">尚未付款</span>\n            <span v-else class=\"text-success\">付款確認中</span>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n      <div class=\"text-end\" v-if=\"order.is_paid === false\">\n        <button class=\"btn btn-danger\">確認付款去</button>\n      </div>\n    </form>\n  </div>\n  <LinePayModal ref=\"LinePayModal\" @update-checkout=\"getOrder\"></LinePayModal>\n</template>\n\n<script>\n\nimport LinePayModal from '@/components/LinePayModal.vue';\n\nexport default {\n  data() {\n    return {\n      order: {\n        user: {},\n      },\n      orderId: '',\n      isLoading: false,\n    };\n  },\n  components: {\n    LinePayModal,\n  },\n  methods: {\n    getOrder() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order/${this.orderId}`;\n      this.$http.get(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.order = res.data.order;\n            console.log(this.order);\n            this.isLoading = false;\n            if (this.order.is_paid === true) {\n              this.$router.push('/user/cart');\n            }\n          }\n        });\n    },\n    payOrder() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/pay/${this.orderId}`;\n\n      this.$http.post(url)\n        .then((res) => {\n          console.log(res);\n          if (res.data.success) {\n            // this.getOrder();\n            this.openModal();\n            this.isLoading = false;\n          }\n        });\n    },\n    openModal() {\n      // this.tempOrder = { ...item };\n      // this.isNew = false;\n      const linepayComponent = this.$refs.LinePayModal;\n      linepayComponent.showModal();\n    },\n  },\n  created() {\n    this.orderId = this.$route.params.orderId;\n    console.log(this.orderId);\n    this.getOrder();\n  },\n};\n</script>\n","<template>\n  <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\"\n       aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"modal\">\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header text-black\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>LINE Pay QRCode</span>\n          </h5>\n          <button type=\"button\" class=\"btn-close btn-outline-secondary\"\n                  data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div>\n          <img src=\"/img/logo.82b9c7a5.png\" class=\"rounded mx-auto d-block\" />\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-secondary\"\n                  @click=\"$emit('update-order', tempOrder)\">取消</button>\n          <button type=\"button\" class=\"btn btn-primary\"\n                  data-bs-dismiss=\"modal\" @click=\"$emit('update-checkout')\">確認\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  name: 'LinePayModal',\n  props: {\n    order: {\n      type: Object,\n      default() { return {}; },\n    },\n  },\n  data() {\n    return {\n      status: {},\n      modal: '',\n      tempOrder: {},\n      isPaid: false,\n    };\n  },\n  methods: {\n  },\n  emits: ['update-checkout'],\n  mixins: [modalMixin],\n  inject: ['emitter'],\n  watch: {\n    order() {\n      this.tempOrder = this.order;\n      this.isPaid = this.tempOrder.is_paid;\n    },\n  },\n};\n</script>\n","import { render } from \"./LinePayModal.vue?vue&type=template&id=b826eb8c\"\nimport script from \"./LinePayModal.vue?vue&type=script&lang=js\"\nexport * from \"./LinePayModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./UserCheckout.vue?vue&type=template&id=a1046fb2\"\nimport script from \"./UserCheckout.vue?vue&type=script&lang=js\"\nexport * from \"./UserCheckout.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}