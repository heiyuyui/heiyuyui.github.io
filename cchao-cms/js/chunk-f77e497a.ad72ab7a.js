(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f77e497a"],{a3d3:function(t,e,c){"use strict";c.r(e);c("b0c0");var a=c("7a23"),n={class:"my-5 row justify-content-center"},o={class:"table align-middle"},r=Object(a["h"])("thead",null,[Object(a["h"])("th",null,"品名"),Object(a["h"])("th",null,"數量"),Object(a["h"])("th",null,"單價")],-1),l={class:"text-end"},d=Object(a["h"])("td",{colspan:"2",class:"text-end"},"總計",-1),s={class:"text-end"},i={class:"table"},b=Object(a["h"])("th",{width:"100"},"Email",-1),u=Object(a["h"])("th",null,"姓名",-1),h=Object(a["h"])("th",null,"收件人電話",-1),O=Object(a["h"])("th",null,"收件人地址",-1),j=Object(a["h"])("th",null,"付款狀態",-1),p={key:0},m={key:1,class:"text-success"},f={key:0,class:"text-end"},y=Object(a["h"])("button",{class:"btn btn-danger"},"確認付款去",-1);function g(t,e,c,g,v,k){var L=Object(a["A"])("Loading"),x=Object(a["A"])("LinePayModal");return Object(a["t"])(),Object(a["e"])(a["a"],null,[Object(a["h"])(L,{active:v.isLoading},null,8,["active"]),Object(a["h"])("div",n,[Object(a["h"])("form",{class:"col-md-6",onSubmit:e[1]||(e[1]=Object(a["N"])((function(){return k.payOrder&&k.payOrder.apply(k,arguments)}),["prevent"]))},[Object(a["h"])("table",o,[r,Object(a["h"])("tbody",null,[(Object(a["t"])(!0),Object(a["e"])(a["a"],null,Object(a["y"])(v.order.products,(function(t){return Object(a["t"])(),Object(a["e"])("tr",{key:t.id},[Object(a["h"])("td",null,Object(a["D"])(t.product.title),1),Object(a["h"])("td",null,Object(a["D"])(t.qty)+"/"+Object(a["D"])(t.product.unit),1),Object(a["h"])("td",l,Object(a["D"])(t.final_total),1)])})),128))]),Object(a["h"])("tfoot",null,[Object(a["h"])("tr",null,[d,Object(a["h"])("td",s,Object(a["D"])(v.order.total),1)])])]),Object(a["h"])("table",i,[Object(a["h"])("tbody",null,[Object(a["h"])("tr",null,[b,Object(a["h"])("td",null,Object(a["D"])(v.order.user.email),1)]),Object(a["h"])("tr",null,[u,Object(a["h"])("td",null,Object(a["D"])(v.order.user.name),1)]),Object(a["h"])("tr",null,[h,Object(a["h"])("td",null,Object(a["D"])(v.order.user.tel),1)]),Object(a["h"])("tr",null,[O,Object(a["h"])("td",null,Object(a["D"])(v.order.user.address),1)]),Object(a["h"])("tr",null,[j,Object(a["h"])("td",null,[v.order.is_paid?(Object(a["t"])(),Object(a["e"])("span",m,"付款確認中")):(Object(a["t"])(),Object(a["e"])("span",p,"尚未付款"))])])])]),!1===v.order.is_paid?(Object(a["t"])(),Object(a["e"])("div",f,[y])):Object(a["f"])("",!0)],32)]),Object(a["h"])(x,{ref:"LinePayModal",onUpdateCheckout:k.getOrder},null,8,["onUpdateCheckout"])],64)}c("99af");var v={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},k={class:"modal-dialog modal-xl",role:"document"},L={class:"modal-content border-0"},x=Object(a["h"])("div",{class:"modal-header text-black"},[Object(a["h"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(a["h"])("span",null,"LINE Pay QRCode")]),Object(a["h"])("button",{type:"button",class:"btn-close btn-outline-secondary","data-bs-dismiss":"modal","aria-label":"Close"})],-1),M=Object(a["h"])("div",null,[Object(a["h"])("img",{src:"/img/logo.82b9c7a5.png",class:"rounded mx-auto d-block"})],-1),w={class:"modal-footer"};function D(t,e,c,n,o,r){return Object(a["t"])(),Object(a["e"])("div",v,[Object(a["h"])("div",k,[Object(a["h"])("div",L,[x,M,Object(a["h"])("div",w,[Object(a["h"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[1]||(e[1]=function(e){return t.$emit("update-order",o.tempOrder)})},"取消"),Object(a["h"])("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[2]||(e[2]=function(e){return t.$emit("update-checkout")})},"確認 ")])])])],512)}var P=c("e0ae"),I={name:"LinePayModal",props:{order:{type:Object,default:function(){return{}}}},data:function(){return{status:{},modal:"",tempOrder:{},isPaid:!1}},methods:{},emits:["update-checkout"],mixins:[P["a"]],inject:["emitter"],watch:{order:function(){this.tempOrder=this.order,this.isPaid=this.tempOrder.is_paid}}};I.render=D;var $=I,C={data:function(){return{order:{user:{}},orderId:"",isLoading:!1}},components:{LinePayModal:$},methods:{getOrder:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cchao","/order/").concat(this.orderId);this.$http.get(e).then((function(e){e.data.success&&(t.order=e.data.order,console.log(t.order),t.isLoading=!1,!0===t.order.is_paid&&t.$router.push("/user/cart"))}))},payOrder:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cchao","/pay/").concat(this.orderId);this.$http.post(e).then((function(e){console.log(e),e.data.success&&(t.openModal(),t.isLoading=!1)}))},openModal:function(){var t=this.$refs.LinePayModal;t.showModal()}},created:function(){this.orderId=this.$route.params.orderId,console.log(this.orderId),this.getOrder()}};C.render=g;e["default"]=C},b0c0:function(t,e,c){var a=c("83ab"),n=c("9bf2").f,o=Function.prototype,r=o.toString,l=/^\s*function ([^ (]*)/,d="name";a&&!(d in o)&&n(o,d,{configurable:!0,get:function(){try{return r.call(this).match(l)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-f77e497a.ad72ab7a.js.map